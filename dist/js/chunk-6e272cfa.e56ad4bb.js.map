{"version":3,"sources":["webpack:///./src/views/Features/Mychat.vue?f41d","webpack:///./src/views/Features/Mychat.vue?8b74","webpack:///src/views/Features/Mychat.vue","webpack:///./src/views/Features/Mychat.vue?ae4e","webpack:///./src/views/Features/Mychat.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","directives","name","rawName","_l","chat_user_list","user","idx","key","on","$event","change_target","_s","seller","chat","type","time","message","sender","userID","model","value","callback","$$v","input_msg","expression","sendMsg","staticRenderFns","data","nickname","chats","created","$store","getters","getUser","getSeller","mounted","firestore","$database","collection","doc","methods","watch","console","log","component"],"mappings":"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","file":"js/chunk-6e272cfa.e56ad4bb.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mychat.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('PageTitle',{attrs:{\"headerTitle\":\"Chat Page\",\"headerSubTitle\":\"You can chat with buyer or seller in guarantee reponsable!\"}}),_c('div',{staticClass:\"product-wrapper section-gap\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row mb-3\"},[_c('div',{staticClass:\"col-sm-12 col-md-6 m-md-b\"},[_c('b-row',[_c('b-col',{attrs:{\"cols\":\"12\"}},[_c('h2',[_vm._v(\" Chat List \")]),_c('div',{directives:[{name:\"chat-scroll\",rawName:\"v-chat-scroll\"}],staticClass:\"chat-box\"},[_c('b-list-group',_vm._l((_vm.chat_user_list.users),function(user,idx){return _c('b-list-group-item',{key:idx,staticClass:\"chat-item\"},[_c('a',[_c('div',{staticClass:\"chat-message text-left\",attrs:{\"text-left\":\"\"},on:{\"click\":function($event){return _vm.change_target(user)}}},[_c('b-card',{attrs:{\"border-variant\":\"secondary\"}},[_c('b-card-title',[_vm._v(_vm._s(user))])],1)],1)])])}),1)],1)])],1)],1),_c('div',{staticClass:\"col-sm-12 col-md-6 m-md-b\"},[_c('b-row',[_c('b-col',{attrs:{\"cols\":\"12\"}},[_c('h2',[_vm._v(\" \"+_vm._s(_vm.seller)+\" \")]),_c('div',{directives:[{name:\"chat-scroll\",rawName:\"v-chat-scroll\"}],staticClass:\"chat-box\"},[_c('b-list-group',_vm._l((_vm.chats),function(chat,idx){return _c('b-list-group-item',{key:idx,staticClass:\"chat-item\"},[(chat.type==='join'||chat.type==='exit')?_c('div',{staticClass:\"chat-status text-center\"},[_c('span',{staticClass:\"chat-date\"},[_vm._v(_vm._s(chat.time))]),_c('span',{staticClass:\"chat-content-center\"},[_vm._v(_vm._s(chat.message))])]):(chat.sender === _vm.user.userID)?_c('div',{staticClass:\"chat-message text-right\"},[_c('div',{staticClass:\"right-bubble\"},[_c('span',{staticClass:\"msg-name\"},[_vm._v(\"Me\")]),_c('span',{staticClass:\"msg-date\"},[_vm._v(_vm._s(chat.time))]),_c('p',{attrs:{\"text-wrap\":\"\"}},[_vm._v(_vm._s(chat.message))])])]):_c('div',{staticClass:\"chat-message text-left\",attrs:{\"text-left\":\"\"}},[_c('div',{staticClass:\"left-bubble\"},[_c('span',{staticClass:\"msg-name\"},[_vm._v(_vm._s(chat.user))]),_c('span',{staticClass:\"msg-date\"},[_vm._v(_vm._s(chat.time))]),_c('p',{attrs:{\"text-wrap\":\"\"}},[_vm._v(_vm._s(chat.message))])])])])}),1)],1),_c('b-form',[_c('b-input-group',[_c('b-form-input',{attrs:{\"id\":\"message\",\"placeholder\":\"Enter your message\"},model:{value:(_vm.input_msg),callback:function ($$v) {_vm.input_msg=$$v},expression:\"input_msg\"}}),_c('b-button',{staticClass:\"primary\",on:{\"click\":function($event){return _vm.sendMsg()}}},[_vm._v(\"Send\")])],1)],1)],1)],1)],1)])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n   <div>\n      <PageTitle\n         headerTitle=\"Chat Page\"\n         headerSubTitle=\"You can chat with buyer or seller in guarantee reponsable!\"\n      >\n      </PageTitle>\n      <div class=\"product-wrapper section-gap\">\n         <div class=\"container\">\n            <div class=\"row mb-3\">\n               <div class=\"col-sm-12 col-md-6 m-md-b\">\n                  <b-row>\n                     <b-col cols=\"12\">\n                        <h2>\n                        Chat List\n                        </h2>\n                        <div class=\"chat-box\" v-chat-scroll>\n                        \n                        <b-list-group>\n                           <b-list-group-item class=\"chat-item\" v-for=\"(user,idx) of chat_user_list.users\" :key=\"idx\">\n                              <a>\n                              <div class=\"chat-message text-left\" text-left @click=\"change_target(user)\">\n                                 <b-card border-variant=\"secondary\">\n                                    <b-card-title>{{user}}</b-card-title>\n                                 </b-card>\n                              </div>\n                              </a>\n                           </b-list-group-item>\n                        </b-list-group>\n                        </div>\n                     </b-col>\n                  </b-row>\n               </div>\n               <div class=\"col-sm-12 col-md-6 m-md-b\">\n                  <b-row>\n                     <b-col cols=\"12\">\n                        <h2>\n                        {{seller}}\n                        </h2>\n                        <div class=\"chat-box\" v-chat-scroll>\n                        <b-list-group>\n                           <b-list-group-item class=\"chat-item\" v-for=\"(chat,idx) of chats\" :key=\"idx\">\n                              <div class=\"chat-status text-center\" v-if=\"chat.type==='join'||chat.type==='exit'\">\n                              <span class=\"chat-date\">{{chat.time}}</span>\n                              <span class=\"chat-content-center\">{{chat.message}}</span>\n                              </div>\n                              <div class=\"chat-message text-right\" v-else-if=\"chat.sender === user.userID\">\n                                 <div class=\"right-bubble\">\n                                    <span class=\"msg-name\">Me</span>\n                                    <span class=\"msg-date\">{{chat.time}}</span>\n                                    <p text-wrap>{{chat.message}}</p>\n                                 </div>\n                              </div>\n                              <div class=\"chat-message text-left\" text-left v-else>\n                                 <div class=\"left-bubble\">\n                                    <span class=\"msg-name\">{{chat.user}}</span>\n                                    <span class=\"msg-date\">{{chat.time}}</span>\n                                    <p text-wrap>{{chat.message}}</p>\n                                 </div>\n                              </div>\n                           </b-list-group-item>\n                        </b-list-group>\n                        </div>\n                        <b-form>\n                           <b-input-group>\n                              <b-form-input id=\"message\" v-model=\"input_msg\" placeholder=\"Enter your message\"></b-form-input>\n                              <b-button class=\"primary\" @click=\"sendMsg()\">Send</b-button>\n                           </b-input-group>\n                        </b-form>\n                     </b-col>\n                  </b-row>\n               </div>\n            </div><!-- row closed -->\n         </div><!-- container closed -->\n      </div><!-- product wrapper closed -->\n   </div>   \n</template>\n<script>\nexport default {\n  data() {\n    return {\n      input_msg: \"\",\n      user: null,\n      seller: null,\n      nickname: \"me\",\n      chats:null,\n      chat_user_list: [],\n    };\n  },\n  created() {\n    this.user = this.$store.getters.getUser\n    this.seller = this.$store.getters.getSeller\n  },\n  mounted() {\n  },\n  firestore() {\n   return {\n      chats : this.$store.getters.getSeller!=null ? this.$database.collection('Msg').doc(this.$store.getters.getUser.userID).collection(this.$store.getters.getSeller).orderBy(\"time\") : \n      (this.sellers == null ? [] : this.$database.collection('Msg').doc(this.$store.getters.getUser.userID).collection(this.seller).orderBy(\"time\")),\n      chat_user_list: this.$database.collection('Msg').doc(this.$store.getters.getUser.userID)\n   }\n  },\n  methods: {\n     sendMsg () {\n        console.log((new Date).toTimeString().slice(0,8))\n        if(this.input_msg==\"\")\n        {\n           alert(\"input message!\")\n           return\n        }\n        this.$database.collection('Msg').doc(this.user.userID).collection(this.seller).add({\n           message: this.input_msg,\n           type: 'msg',\n           sender: this.user.userID,\n           time: (new Date()).toDateString()+' '+(new Date).toTimeString().slice(0,8)\n        })\n        this.$database.collection('Msg').doc(this.seller).collection(this.user.userID).add({\n           message: this.input_msg,\n           type: 'msg',\n           sender: this.user.userID,\n           time: (new Date()).toDateString()+' '+(new Date).toTimeString().slice(0,8)\n        })\n        this.input_msg=\"\"\n     },\n     change_target(user) {\n        console.log(this.chats)\n        this.$store.commit('setSeller',user)\n        this.$router.go(0)\n        //location.reload()\n        //this.seller = user\n\n        var change_chats_func = this.change_chats\n        this.$database.collection('Msg').doc(this.user.userID).collection(this.seller).orderBy(\"time\").get().then(function (docs) {\n           var new_chat = []\n           for(var i=0;i<docs.docs.length;i++)\n           {\n              console.log(docs.docs[i].data())\n              new_chat.push(docs.docs[i].data())\n           }\n           change_chats_func(new_chat)\n        })\n     },\n     change_chats(new_chat) {\n        this.chats = new_chat\n     }\n  },\n  watch: {\n   chats: function () {\n      console.log(this.chats)\n   },\n  }\n};\n</script>\n<style>\n  .chat-box {\n    height: 500px;\n    width: 100%;\n    overflow: scroll;\n  }\n  .chat-item {\n    border: none;\n  }\n  .chat-status {\n    min-height: 49px;\n  }\n  .chat-status .chat-date {\n    display: block;\n    font-size: 10px;\n    font-style: italic;\n    color: #999;\n    height: 15px;\n    left: 10%;\n    right:10%;\n  }\n  .chat-status .chat-content-center {\n    padding: 5px 10px;\n    background-color: #e1e1f7;\n    border-radius: 6px;\n    font-size: 12px;\n    color: #555;\n    height: 34px;\n    left: 10%;\n    right:10%;\n  }\n  .chat-message {\n    width: 80%;\n    min-height: 40px;\n  }\n  .chat-message .right-bubble {\n    position: relative;\n    background: #dcf8c6;\n    border-top-left-radius: .4em;\n    border-bottom-left-radius: .4em;\n    border-bottom-right-radius: .4em;\n    padding: 5px 10px 10px;\n    left: 15%;\n  }\n  .chat-message .right-bubble span.msg-name {\n    font-size: 12px;\n    font-weight: bold;\n    color: green;\n    display: block;\n  }\n  .chat-message .right-bubble span.msg-date {\n    font-size: 10px;\n    display: block;\n  }\n  .chat-message .right-bubble:after {\n    content: '';\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 0;\n    height: 0;\n    border: 27px solid transparent;\n    border-left-color: #dcf8c6;\n    border-right: 0;\n    border-top: 0;\n    margin-top: -0.5px;\n    margin-right: -27px;\n  }\n  .chat-message .left-bubble {\n    position: relative;\n    background: #efefef;\n    border-top-right-radius: .4em;\n    border-bottom-left-radius: .4em;\n    border-bottom-right-radius: .4em;\n    padding: 5px 10px 10px;\n    left: 5%;\n  }\n  .chat-message .left-bubble span.msg-name {\n    font-size: 12px;\n    font-weight: bold;\n    color: blue;\n    display: block;\n  }\n  .chat-message .left-bubble span.msg-date {\n    font-size: 10px;\n    display: block;\n  }\n  .chat-message .left-bubble:after {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 0;\n    height: 0;\n    border: 27px solid transparent;\n    border-right-color: #efefef;\n    border-left: 0;\n    border-top: 0;\n    margin-top: -0.5px;\n    margin-left: -27px;\n  }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mychat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mychat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Mychat.vue?vue&type=template&id=7b14656e&\"\nimport script from \"./Mychat.vue?vue&type=script&lang=js&\"\nexport * from \"./Mychat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mychat.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}