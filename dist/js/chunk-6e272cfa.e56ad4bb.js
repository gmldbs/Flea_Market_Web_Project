(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e272cfa"],{"4d7a":function(t,s,e){"use strict";e("7d34")},7892:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("PageTitle",{attrs:{headerTitle:"Chat Page",headerSubTitle:"You can chat with buyer or seller in guarantee reponsable!"}}),e("div",{staticClass:"product-wrapper section-gap"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-sm-12 col-md-6 m-md-b"},[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("h2",[t._v(" Chat List ")]),e("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}],staticClass:"chat-box"},[e("b-list-group",t._l(t.chat_user_list.users,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"chat-item"},[e("a",[e("div",{staticClass:"chat-message text-left",attrs:{"text-left":""},on:{click:function(e){return t.change_target(s)}}},[e("b-card",{attrs:{"border-variant":"secondary"}},[e("b-card-title",[t._v(t._s(s))])],1)],1)])])})),1)],1)])],1)],1),e("div",{staticClass:"col-sm-12 col-md-6 m-md-b"},[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("h2",[t._v(" "+t._s(t.seller)+" ")]),e("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}],staticClass:"chat-box"},[e("b-list-group",t._l(t.chats,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"chat-item"},["join"===s.type||"exit"===s.type?e("div",{staticClass:"chat-status text-center"},[e("span",{staticClass:"chat-date"},[t._v(t._s(s.time))]),e("span",{staticClass:"chat-content-center"},[t._v(t._s(s.message))])]):s.sender===t.user.userID?e("div",{staticClass:"chat-message text-right"},[e("div",{staticClass:"right-bubble"},[e("span",{staticClass:"msg-name"},[t._v("Me")]),e("span",{staticClass:"msg-date"},[t._v(t._s(s.time))]),e("p",{attrs:{"text-wrap":""}},[t._v(t._s(s.message))])])]):e("div",{staticClass:"chat-message text-left",attrs:{"text-left":""}},[e("div",{staticClass:"left-bubble"},[e("span",{staticClass:"msg-name"},[t._v(t._s(s.user))]),e("span",{staticClass:"msg-date"},[t._v(t._s(s.time))]),e("p",{attrs:{"text-wrap":""}},[t._v(t._s(s.message))])])])])})),1)],1),e("b-form",[e("b-input-group",[e("b-form-input",{attrs:{id:"message",placeholder:"Enter your message"},model:{value:t.input_msg,callback:function(s){t.input_msg=s},expression:"input_msg"}}),e("b-button",{staticClass:"primary",on:{click:function(s){return t.sendMsg()}}},[t._v("Send")])],1)],1)],1)],1)],1)])])])],1)},i=[],r=(e("fb6a"),e("0d03"),{data:function(){return{input_msg:"",user:null,seller:null,nickname:"me",chats:null,chat_user_list:[]}},created:function(){this.user=this.$store.getters.getUser,this.seller=this.$store.getters.getSeller},mounted:function(){},firestore:function(){return{chats:null!=this.$store.getters.getSeller?this.$database.collection("Msg").doc(this.$store.getters.getUser.userID).collection(this.$store.getters.getSeller).orderBy("time"):null==this.sellers?[]:this.$database.collection("Msg").doc(this.$store.getters.getUser.userID).collection(this.seller).orderBy("time"),chat_user_list:this.$database.collection("Msg").doc(this.$store.getters.getUser.userID)}},methods:{sendMsg:function(){console.log((new Date).toTimeString().slice(0,8)),""!=this.input_msg?(this.$database.collection("Msg").doc(this.user.userID).collection(this.seller).add({message:this.input_msg,type:"msg",sender:this.user.userID,time:(new Date).toDateString()+" "+(new Date).toTimeString().slice(0,8)}),this.$database.collection("Msg").doc(this.seller).collection(this.user.userID).add({message:this.input_msg,type:"msg",sender:this.user.userID,time:(new Date).toDateString()+" "+(new Date).toTimeString().slice(0,8)}),this.input_msg=""):alert("input message!")},change_target:function(t){console.log(this.chats),this.$store.commit("setSeller",t),this.$router.go(0);var s=this.change_chats;this.$database.collection("Msg").doc(this.user.userID).collection(this.seller).orderBy("time").get().then((function(t){for(var e=[],a=0;a<t.docs.length;a++)console.log(t.docs[a].data()),e.push(t.docs[a].data());s(e)}))},change_chats:function(t){this.chats=t}},watch:{chats:function(){console.log(this.chats)}}}),c=r,l=(e("4d7a"),e("2877")),n=Object(l["a"])(c,a,i,!1,null,null,null);s["default"]=n.exports},"7d34":function(t,s,e){}}]);
//# sourceMappingURL=chunk-6e272cfa.e56ad4bb.js.map