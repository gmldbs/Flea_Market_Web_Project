(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13621525"],{5899:function(t,s){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,s,r){var a=r("1d80"),e=r("5899"),o="["+e+"]",i=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),u=function(t){return function(s){var r=String(a(s));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(c,"")),r}};t.exports={start:u(1),end:u(2),trim:u(3)}},6367:function(t,s,r){"use strict";r.r(s);var a=function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",[r("PageTitle",{attrs:{headerTitle:"Your Cart!",headerSubTitle:"You can see products that you choose"}}),r("div",{staticClass:"product-wrapper section-gap cart-page"},[r("div",{staticClass:"container"},[r("div",{staticClass:"section-title-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12 col-md-6"},[r("h2",[t._v("Your Cart")]),r("p",{staticClass:"mb-0 lead"},[t._v("You have "),r("span",{staticClass:"text-primary"},[t._v(t._s(t.CartProducts.length))]),t._v(" Items in your Cart")])])])]),r("div",{staticClass:"table-responsive mb-5"},[r("table",{staticClass:"table table-bordered"},[t._m(0),r("tbody",t._l(t.CartProducts,(function(s,a){return r("tr",{key:a,on:{click:function(r){return t.goDetail(s)}}},[r("td",{staticClass:"w-20 text-center",on:{click:function(r){return t.Product_detail(s)}}},[r("div",{staticClass:"p-img"},[r("img",{staticClass:"img-fluid card-shadow",attrs:{src:t.product_images[a],alt:"product image",width:"80",height:"80"}})])]),r("td",{on:{click:function(r){return t.Product_detail(s)}}},[t._v(t._s(s.product_name))]),r("td",{on:{click:function(r){return t.Product_detail(s)}}},[t._v("$"+t._s(s.product_price))]),r("td",{staticClass:"w-20 text-center position-relative"},[r("button",{staticClass:"close-btn bg-transparent border-0 font-2x",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(r){return t.remove_cart(s)}}},[t._m(1,!0)])])])})),0)])]),r("div",{staticClass:"cart-info"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12 col-md-6 ml-auto"},[r("div",{staticClass:"bg-light py-4 px-3"},[r("h2",{staticClass:"font-26 mb-4"},[t._v("Cart Totals")]),r("table",{staticClass:"table"},[r("tbody",[r("tr",{staticClass:"border-bottom font-weight-bold"},[r("td",[t._v("Total")]),r("td",[t._v("$ "+t._s(t.total))])])])]),r("div",{staticClass:"block"},[r("a",{staticClass:"btn btn-primary submit-btn btn-block btn-lg",staticStyle:{color:"white"},on:{click:function(s){return t.buyAll()}}},[t._v("Checkout")])])])])])])])])],1)},e=[function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("thead",[r("tr",[r("th",[t._v("Image")]),r("th",[t._v("Products")]),r("th",[t._v("Price")]),r("th")])])},function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("span",{attrs:{"aria-hidden":"true"}},[r("i",{staticClass:"fa fa-trash"})])}],o=(r("c975"),r("a434"),r("e25e"),{data:function(){return{user:null,password:null,product_images:[],Products:null,Cart:[],CartProducts:[],isCart:[],total:0}},mounted:function(){this.user=this.$store.getters.getUser,this.user&&(this.Cart=this.user.Cart),console.log(this.Cart)},firestore:function(){return{Products:this.$database.collection("Products")}},methods:{Product_detail:function(t){this.$store.commit("setProduct",t),this.$router.push("product-detail")},remove_cart:function(t){null!=this.user?(this.Cart.splice(this.Cart.indexOf(t),1),this.$database.collection("Users").doc(this.user.userID).set({Cart:this.Cart},{merge:!0})):alert("You can add this product to your Cartlist after login.")},goDetail:function(t){console.log(t)},buyAll:function(){for(var t=0,s=0,r=this.user,a=this.$store,e=this.$router,o=this.$database,i=0;i<this.CartProducts.length;i++)this.CartProducts[i].isAuction||s++;for(i=0;i<this.CartProducts.length;i++)this.CartProducts[i].isAuction||this.$database.collection("Products").doc(this.CartProducts[i].productID).set({state:"sold"},{merge:!0}).then((function(){t++,t>=s&&o.collection("Users").doc(r.userID).set({cart:[]},{merge:!0}).then((function(){r.Cart=[],a.commit("setUser",r),alert("Buy All Products in cart Success!"),e.push("home")}))}))}},watch:{Products:function(){this.product_images=[],this.CartProducts=[],this.total=0;for(var t=0;t<this.Products.length;t++)for(var s=0;s<this.Cart.length;s++)if(this.Cart[s]==this.Products[t].productID){this.CartProducts.push(this.Products[t]),this.product_images.push("https://firebasestorage.googleapis.com/v0/b/web-project-4f3bd.appspot.com/o/images%2F"+this.Products[t].productID+"%2Fthumb?alt=media"),console.log(this.Products[t].isAuction),this.Products[t].isAuction||(this.total+=parseInt(this.Products[t].product_price));break}},Cart:function(){this.product_images=[],this.CartProducts=[],this.total=0;for(var t=0;t<this.Products.length;t++)for(var s=0;s<this.Cart.length;s++)if(this.Cart[s]==this.Products[t].productID){this.CartProducts.push(this.Products[t]),this.product_images.push("https://firebasestorage.googleapis.com/v0/b/web-project-4f3bd.appspot.com/o/images%2F"+this.Products[t].productID+"%2Fthumb?alt=media"),this.Products[t].isAuction||(this.total+=parseInt(this.Products[t].product_price));break}}}}),i=o,c=r("2877"),u=Object(c["a"])(i,a,e,!1,null,null,null);s["default"]=u.exports},c20d:function(t,s,r){var a=r("da84"),e=r("58a8").trim,o=r("5899"),i=a.parseInt,c=/^[+-]?0[Xx]/,u=8!==i(o+"08")||22!==i(o+"0x16");t.exports=u?function(t,s){var r=e(String(t));return i(r,s>>>0||(c.test(r)?16:10))}:i},e25e:function(t,s,r){var a=r("23e7"),e=r("c20d");a({global:!0,forced:parseInt!=e},{parseInt:e})}}]);
//# sourceMappingURL=chunk-13621525.f351323e.js.map